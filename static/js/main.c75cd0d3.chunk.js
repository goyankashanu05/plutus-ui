(this["webpackJsonpplutus-ui"]=this["webpackJsonpplutus-ui"]||[]).push([[0],{188:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(54),i=a.n(o),s=(a(71),a(27)),c=a(5),u=a.n(c),l=a(55),d=a(56),p=a(64),h=a(57),f=a(65),g=a(58),v=(a(73),a(59));var D=function(t){var e={tooltips:{displayColors:!1,titleFontSize:16,bodyFontSize:14,xPadding:10,yPadding:10,callbacks:{label:function(t,e){return["Time : ".concat(new Date(1e3*e.labels[t.index].x).toGMTString()),"Amount : ".concat(e.labels[t.index].y),"Block Height : ".concat(e.labels[t.index].blockheight)]}}},hover:{mode:"nearest",intersect:!0},maintainAspectRatio:!0,scales:{xAxes:[{type:"linear",position:"bottom"}]}};return r.a.createElement("div",null,r.a.createElement(v.a,{data:t.chartData,options:e}))};var m=function(t){return r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Enter Address",onChange:function(e){return t.handleAddressEvent(e)}}),r.a.createElement("button",{onClick:function(){return t.handleSearch()}},"SEARCH"))},E=a(61),T=a.n(E),b=function(t,e){return function(t,e){var a=0;return t.forEach((function(t){-1!==t.scriptPubKey.addresses.findIndex((function(t){return t===e}))&&(a+=parseFloat(t.value))})),a}(t.vout,e)-function(t,e){var a=0;return t.forEach((function(t){-1!==t.addresses.findIndex((function(t){return t===e}))&&(a+=parseFloat(t.value))})),a}(t.vin,e)},x=function(){var t=new Date,e=t.getDate()-t.getDay(),a=new Date(t.setDate(e)).toUTCString();return parseInt(new Date(a).getTime()/1e3)},A=function(t){var e=new Date;return e.setMonth(e.getMonth()-t),parseInt(new Date(e).getTime()/1e3)},_=a(26),w=a(63),I=a.n(w);function y(){var t=Object(g.a)(["\ndisplay: block;\nmargin: 24% 45% auto;\nborder-color: red;\nposition: absolute;\n\n"]);return y=function(){return t},t}var H=Object(_.css)(y()),O=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(p.a)(this,Object(h.a)(e).call(this))).handleAddressChange=function(e){t.setState({address:e.target.value})},t.handleSearch=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({loading:!0,apiData:{txs:[]}},(function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(t.getDetail());case 2:console.log("===api===",t.state.apiData),t.updateGraph(t.filterChartData(t.state.apiData));case 4:case"end":return e.stop()}}))}));case 1:case"end":return e.stop()}}))},t.updateGraph=function(e){var a=function(t,e){var a=[];t=t.sort((function(t,e){return t.time-e.time}));var n=0;return t.forEach((function(t){n+=b(t,e),a.push({x:t.time,y:n,blockheight:t.blockheight})})),a}(e,t.state.address);console.log("===data===",a),t.setState({loading:!1,chartData:{labels:a,datasets:[{showLine:!0,pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,label:"Amount",fill:!1,data:a}]}})},t.getDetail=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(t.getApiData(1,1e3));case 2:if(!(t.state.apiData.page<t.state.apiData.totalPages)){e.next=7;break}return e.next=5,u.a.awrap(t.getApiData(t.state.apiData.page+1,t.state.apiData.itemsOnPage));case 5:e.next=2;break;case 7:case"end":return e.stop()}}))},t.getApiData=function(e,a){var n,r,o,i;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.state,r=n.address,o=n.apiPath,i=n.apiData,c.next=3,u.a.awrap(T.a.get("".concat(o).concat(r,"?page=").concat(e,"&pageSize=").concat(a)).then((function(e){console.log("======response====",e.data);var a=e.data;a.txs=[].concat(Object(s.a)(i.txs),Object(s.a)(a.txs)),t.setState({apiData:a})})));case 3:case"end":return c.stop()}}))},t.filterChartData=function(t){var e=[];return t.txs.forEach((function(t){e.push(t)})),e},t.filterChartDataByDates=function(t,e){var a=[];return t.txs.forEach((function(t){t.time>=e.startDate&&t.time<e.endDate&&a.push(t)})),a},t.filerByTime=function(e){if("ALL_DATA"===e.target.value){var a=t.filterChartData(t.state.apiData);t.updateGraph(a)}else{t.setState({dateFilterValue:e.target.value});var n=function(t){var e=new Date;e.setHours(0,0,0,0);var a=parseInt(e.getTime()/1e3);e.setHours(23,59,59,999);var n=parseInt(e.getTime()/1e3);return(new Map).set("FILTER_TODAY",{startDate:a,endDate:n}).set("FILTER_THIS_WEEK",{startDate:x(),endDate:n}).set("FILTER_THIS_MONTH",{startDate:A(1),endDate:n}).set("FILTER_3_MONTH_AGO",{startDate:A(3),endDate:n}).set("FILTER_6_MONTH_AGO",{startDate:A(6),endDate:n}).set("FILTER_THIS_YEAR",{startDate:A(12),endDate:n}).get(t)}(e.target.value);console.log("dateRange : ",n);var r=t.filterChartDataByDates(t.state.apiData,n);t.updateGraph(r)}},t.state={address:"",apiPath:"/plutus-ui",apiData:{txs:[]},loading:!1,chartData:[],dateFilterValue:""},t}return Object(f.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App"},r.a.createElement(m,{handleAddressEvent:this.handleAddressChange,handleSearch:this.handleSearch}),r.a.createElement("select",{value:this.state.dateFilterValue,onChange:function(e){return t.filerByTime(e)}},r.a.createElement("option",{value:"ALL_DATA",selected:!0},"All Data"),r.a.createElement("option",{value:"FILTER_TODAY"},"Last 24 Hours"),r.a.createElement("option",{value:"FILTER_THIS_WEEK"},"This Week"),r.a.createElement("option",{value:"FILTER_THIS_MONTH"},"This Month"),r.a.createElement("option",{value:"FILTER_3_MONTH_AGO"},"3 Months ago"),r.a.createElement("option",{value:"FILTER_6_MONTH_AGO"},"6 Months ago"),r.a.createElement("option",{value:"FILTER_THIS_YEAR"},"This year")),r.a.createElement(I.a,{css:H,size:30,margin:4,color:"green",loading:this.state.loading}),r.a.createElement(D,{chartData:this.state.chartData}))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},66:function(t,e,a){t.exports=a(188)},71:function(t,e,a){},73:function(t,e,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.c75cd0d3.chunk.js.map